{"version":3,"sources":["elecciones_app.js","scripts.js"],"names":["PermanentLinkJS","reset","query","set_hash","set","key","val","k","err","console","error","message","get_parameters","str","location","hash","replace","split","map","n","this","bind","set_from_location","kill","to_string","o","s","push","join","q","get_query","ElecionesApp","list_partidos","results","set_data_active","$","html","fadeIn","r_general","general","internas","interna","comuna_active_path","filtro_activo","ganadores_comunas","com","comunas","c","comuna","log","change","change_dropdown","tmpl_opts","Handlebars","compile","cont_results","tmpl_li_partido","tmpl_x_interna","draw_ul_list","tooltip","tmpl_tooltip","on_click_comuna","pintar_mapa","prototype","select_comuna_interna","polygon","id","com_name","set_comuna_active_path","data","total","porcentaje","draw_x_interna","select_comuna_general","on","hide","remove_comuna_active_path","prop","removeClass","get_max_obj","arr","max","x","Math","apply","sort_obj","compare","a","b","sort","is_comuna","l","show","start_niceScroll","candidato_btn","$el","closest","addClass","value","draw_tooltip","remove","clone","attr","append","x_fuerza","selector","niceScroll","cursorcolor","cursorborder","cursorwidth","autohidemode","hidecursordelay","forEach","css","fill","colores","barios_x_com","c1","c2","c3","c4","c5","c6","c7","c8","c9","c10","c11","c12","c13","c14","c15","mouse_move","toolip","e","window","event","jQuery","fix","itemX","pageX","ancho","itemY","pageY","animate","top","left","stop","isMobile","any","comu","ide","app","width","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","get","mapa","select2","minimumResultsForSearch"],"mappings":"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","file":"js/all.min.js","sourcesContent":["var PermanentLinkJS = function() {\n\t\"use strict\";\n\n\tvar query = {};\n\n\tfunction reset(){ \n\t\tquery = {};\n\t\tset_hash();\n\t\treturn query;\n\t}\n\n\tfunction set(key, val) {\n\t\tif (typeof key == 'object'){\n\t\t\ttry{\n\t\t\t\tfor (var k in key){\n\t\t\t\t\tquery[k] = key[k];\t\n\t\t\t\t}\n\t\t\t}catch(err){\n\t\t\t\tconsole.error(\"Error set query: %s\", err.message);\n\t\t\t}\n\t\t}else{\n\t\t\ttry{\n\t\t\t\tquery[key] = val;\n\t\t\t\tset_hash();\n\t\t\t}catch(err){\n\t\t\t\tconsole.error(\"Error set query: %s\", err.message);\n\t\t\t}\n\t\t}\n\t\treturn query;\n\t}\n\t\n\tfunction get_parameters(str) {\n\t\tstr = str || location.hash;\n\t\treturn str.replace(\"#\", \"\").split(\"&\").map(function(n){return n = n.split(\"=\"),this[n[0]] = n[1],this;}.bind({}))[0];\n\t}\n\n\tfunction set_from_location(){\n\t\treturn (query = get_parameters());\n\t}\n\n\tfunction kill(k){ \n\t\tdelete query[k]; \n\t\tset_hash();\n\t\treturn query;\n\t}\n\n\tfunction to_string(o){\n\t\tvar s = [];\n\t\tfor(var k in o){\n\t\t\ts.push([k, o[k]].join(\"=\"));\n\t\t}\n\t\treturn s.join(\"&\");\n\t}\n\n\tfunction set_hash(q) {\n\t\tq = typeof q == \"string\" ? q : to_string(q || query);\n\t\ttry{\n\t\t\treturn (location.hash = q);\n\t\t}catch(err){\n\t\t\tconsole.error(\"Error set_hash: %s\", err.message);\n\t\t}\n\t}\n\n\tthis.get_query = function() { return query; };\n\t\n\tthis.reset = reset;\n\tthis.get_parameters = get_parameters;\n\tthis.to_string = to_string;\n\tthis.set_hash = set_hash;\n\tthis.set = set;\n\tthis.kill = kill;\n\tthis.set_from_location = set_from_location;\n};\n\n\n// Elecciones class\nvar ElecionesApp = function(list_partidos, results){\n\t\"use strict\";\n\t// set self class var\n\tvar s = this;\n\ts.list_partidos = list_partidos;\n\ts.r_general = results.general;\n\ts.internas = results.interna;\n\ts.comuna_active_path = null;\n\ts.filtro_activo = \"x_fuerza\";\n\t// s.r_internas = results.inernas;\n\n\ts.ganadores_comunas = [];\n\t// data temporal...\n\tfor (var com in s.r_general.comunas){\n\t\tvar c = s.r_general.comunas[com][0];\n\t\tc.comuna = com.replace(/omuna_/i, \"\");\n\t\ts.ganadores_comunas.push(s.r_general.comunas[com][0]);\n\t}\n\tconsole.log(s.ganadores_comunas);\n\n\tfunction set_data_active(str){\n\t\t$(\"#selected h4\").html(str).fadeIn();\n\t}\n\n\n\t(function init(){\n\t\t// bind events\n\n\t\t// change dropdown\n\t\t$('select#opts').change(function(e){\n\n\t\t\ts.change_dropdown($(this).val());\n\t\t});\n\n\t\t\n\t\t// template para el select de internas\n\t\ts.tmpl_opts = Handlebars.compile($('#tmpl_opts').html());\n\t\t$(\"#opts\").html( s.tmpl_opts(s.list_partidos) );\n\t\t\n\t\t\n\t\t// template para listado de resultados por partido\n\t\ts.cont_results = $(\"#results\"); // contenedor ul para los partidos (barras)  \n\t\ts.tmpl_li_partido = Handlebars.compile($('#tmpl_li_partido').html());\n\t\ts.tmpl_x_interna = Handlebars.compile($('#tmpl_x_interna').html());\n\t\t\n\t\ts.draw_ul_list();\n\n\n\t\t// template tooltip\n\t\ts.tooltip = $(\"#tooltip\"); // contenedor ul para los partidos (barras)  \n\t\ts.tmpl_tooltip = Handlebars.compile($('#tmpl_tooltip').html());\n\n\n\t\ts.on_click_comuna();\n\t\t\n\t\ts.pintar_mapa();\n\n\t\ttooltip(); // esta en scripts.js\n\t})();\n\n\tthis.set_data_active = set_data_active;\n};\n\n\nElecionesApp.prototype.select_comuna_interna = \tfunction(polygon){\n\tvar s = this;\n\tvar id = polygon.id.replace(/c/i, \"\");\n\tvar com_name = \"Comuna \"+ id;\n\ts.set_data_active(com_name);\n\n\ts.set_comuna_active_path(polygon);\n\ts.q.set(\"comuna\", id);\n\n\t// data temporal\n\tvar data = {\n\t\ttotal:s.internas.comunas[\"comuna_\"+id],\n\t\tporcentaje: 33.5\n\t};\n\t// !data temporal\n\t\n\ts.draw_x_interna(data);\n\n\n\t\n};\n\n\nElecionesApp.prototype.select_comuna_general = \tfunction(polygon){\n\tvar s = this;\n\n\tvar id = polygon.id.replace(/c/i, \"\");\n\tvar com_name = \"Comuna \"+ id;\n\ts.set_data_active(com_name);\n\t\n\t// set polygon active\n\t// var bbox = polygon.getBBox();\n\t// console.log(bbox, $('svg').height(), $('svg').width());\n\t// // $(\"svg\").css(\"transform\", \"translateX(\"+bbox.x+\"px) translateY(\"+bbox.x+\"px) scale(2)\")\n\t// $('svg').velocity({ translateX: (($('svg').width()/2) - bbox.x -(bbox.width/2))*2, translateY: (($('svg').height()/2) - bbox.y - (bbox.height/2))*1.5, scale: 2 });\n\t// s.set_comuna_active_path(polygon);\n\n\ts.q.set(\"comuna\", id);\n\t// lista de partidos x comuna\n\t// console.log(s.r_general.comunas['comuna_'+id]);\n\ts.draw_ul_list(s.r_general.comunas['comuna_'+id]);\n};\n\n\nElecionesApp.prototype.on_click_comuna = function (){\n\tvar s = this;\n\t// click mapa\n\t$('polygon, path').on('click.on_comuna', function(e){\n\t\t\n\t\tif(s.filtro_activo == \"x_fuerza\"){ // dropdown x fuerza\n\t\t\t\n\t\t\ts.select_comuna_general(this);\n\t\t\n\t\t}else{ // dropdown x interna o listas únicas\n\n\t\t\ts.select_comuna_interna(this);\n\t\t\n\t\t}\n\n\t});\n};\n\n\nElecionesApp.prototype.reset = function (){\n\t// resetea el los filtros\n\t$(\"#selected h4\").hide().html(\"\");\n\t\n\tthis.remove_comuna_active_path();\n\tif(this.filtro_activo == \"x_fuerza\"){ // dropdown x fuerza\n\t\tthis.draw_ul_list();\n\t\tthis.q.kill(\"comuna\");\n\n\t}else{ // dropdown x interna o listas únicas\n\t\tthis.draw_x_interna();\n\n\t}\n\t// clear radio btn\n\t$('li.candidato.active input').prop('checked', false);\n\t$('li.candidato.active').removeClass('active');\n\t\n};\n\nElecionesApp.prototype.get_max_obj = function(arr, key){ \n\t\n\tvar max = arr.map(function(x){ return x[key]; });\n\treturn Math.max.apply(null, max); \n};\n\nElecionesApp.prototype.sort_obj = function(arr, key){ \n\tfunction compare(a,b) {\n\t  if (a[key] > b[key])\n\t     return -1;\n\t  if (a[key] < b[key])\n\t    return 1;\n\t  return 0;\n\t}\n\treturn arr.sort(compare);\n};\n\nElecionesApp.prototype.draw_ul_list = function(data){ // si no viene data, escribe la general\n\t\n\tvar is_comuna = false;\n\tif(!data){\n\t\tdata = this.r_general.total;\n\t}else{\n\t\tis_comuna = true;\n\t}\n\tthis.sort_obj(data, 'porcentaje');\n\tvar max = data.map(function(x){ return x.porcentaje; }); \n\tvar l = {\n\t\tdata : data,\n\t\tis_comuna: is_comuna,\n\t\tmax : this.get_max_obj(data, \"porcentaje\")\n\t};\n\n\tthis.cont_results.html(this.tmpl_li_partido(l));\n\tif(is_comuna){ $(\".help_text, #line\").hide();}else{$(\".help_text, #line\").show();}\n\n// start niceScroll\n\tthis.start_niceScroll(\"#list\");\n\n};\n\n\nElecionesApp.prototype.draw_x_interna = function(data){\n\tif (!data){\n\t\tdata = this.internas;\n\t}\n\tvar s = this;\n\n\ts.cont_results.html(this.tmpl_x_interna(data));\n\n// bind events for inputs\n\tvar candidato_btn = $('input[type=\"radio\"]');\n\tcandidato_btn.on('click.select_condidato', function(el){\n\t\tvar $el = $(this);\n\t\t$('li.active:has(input)').removeClass('active');\n\t\t$el.closest('li').addClass('active');\n\n\t\ts.set_data_active(this.value);\n\t\ts.q.set(\"candidato\", this.value);\n\t});\n\n// start niceScroll\n\ts.start_niceScroll();\n};\n\nElecionesApp.prototype.draw_tooltip = function(data){\n\tthis.tooltip.html(this.tmpl_tooltip(data));\n};\n\nElecionesApp.prototype.remove_comuna_active_path = function(){\n\tif(this.comuna_active_path){\t\n\t\tthis.comuna_active_path.remove();\n\t}\n\n};\n\nElecionesApp.prototype.set_comuna_active_path = function(polygon){\n\t\n\tthis.remove_comuna_active_path();\n\tthis.comuna_active_path = $(polygon).clone();\n\tthis.comuna_active_path.attr(\"class\",\"comuna_active_path\");\n\t$(\"svg\").append(this.comuna_active_path);\n\n};\n\n\nElecionesApp.prototype.change_dropdown = function(val){\n\t\n\tthis.filtro_activo = val;\n\t\n\tvar x_fuerza = 'x_fuerza';\n\n\t$('#ayud1').hide();\n\t$('.compartir').show();\n\n\tif(x_fuerza == this.filtro_activo){\n\t\tthis.draw_ul_list();\n\t}else{\n\t\tthis.draw_x_interna();\n\t}\n\t// set path\n\tthis.q.set('fuerza', val);\n\n\n};\n\nElecionesApp.prototype.start_niceScroll = function(selector){\n\t$(selector).niceScroll({\n\t\tcursorcolor:\"#d7d7d7\",\n\t\tcursorborder:\"0px solid #fff\",\n\t\tcursorwidth: \"7px\",\n\t\tautohidemode:false,\n\t\thidecursordelay:0\n\t});\n};\n\n\nElecionesApp.prototype.pintar_mapa = function(data){\n\tvar s = this;\n\ts.ganadores_comunas.forEach(function(x){\n\t\t$(\"#\"+x.comuna).css({ fill: s.colores[x.id]});\n\t});\n};\n\n\n\nElecionesApp.prototype.barios_x_com = {\n\t  \"c1\": \"Recoleta\",\n\t  \"c2\": \"Palermo\",\n\t  \"c3\": \"Barracas, Boca, Nueva Pompeya, Parque Patricios \",\n\t  \"c4\": \"Constitución, Monserrat, Puerto Madero, Retiro, San Nicolás, San Telmo\",\n\t  \"c5\": \"Belgrano, Colegiales, Nuñez\",\n\t  \"c6\": \"Almagro, Boedo\",\n\t  \"c7\": \"Caballito\",\n\t  \"c8\": \"Flores, Parque Chacabuco\",\n\t  \"c9\": \"Liniers, Mataderos, Parque Avellaneda\",\n\t  \"c10\": \"Floresta, Monte Castro, Velez Sarsfield, Versalles, Villa Luro, Villa Real\",\n\t  \"c11\": \"Villa Del Parque, Villa  Devoto, Villa Gral. Mitre, Villa Santa Rita\",\n\t  \"c12\": \"Coghlan, Saavedra, Villa Pueyrredón, Villa Urquiza\",\n\t  \"c13\": \"Balvanera, San Cristobal\",\n\t  \"c14\": \"Agronomía, Chacarita,  Parque Chas,  Paternal, Villa Crespo, Villa Ortuzar\",\n\t  \"c15\": \"Villa Lugano, Villa Riachuelo, Villa Soldati\"\n\t};\n\nElecionesApp.prototype.q = new PermanentLinkJS();\n\nElecionesApp.prototype.colores = [\"#FEDB30\",\"#1796D7\",\"#7CC374\",\"#F4987E\",\"#B185B7\",\"#B3B3B3\"];\n\n\n","// scripts app\nvar app;\n\nvar ancho = $(window).width();\nvar isMobile = { //valida si es un dispositivo movil\n    Android: function() {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function() {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function() {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function() {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function() {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function() {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\n$(function(){\n    \n\t\"use strict\";\n    // $.ajaxSetup({ cache: false }); \n\t// load mapa\n\t$.get(\"img/caba_ilus.txt\", function(mapa){\n\t\t// get list partidos\n\t\t$.get(\"data/list_partidos.json\", function(list_partidos){\n\t\t\t\n\t\t\t$.get(\"data/results_example.json\", function(results){\n\n\t\t\t\t$(\"#mapa_cont\").html(mapa + '<div class=\"ayuda2\">FILTRAR POR CANDIDATO</div><div class=\"ayuda3\">Clickeá en las comunas para ver los resultados en detalle.</div></div>');\n\t\t\t\t// init app\n\t\t\t\t\n\t\t\t\tapp = new ElecionesApp(list_partidos, results);\n\n\n\t\t\t\t/* select */\n\t\t\t\t\n\t\t\t\t$(\"#opts\").select2({\n\t\t\t        minimumResultsForSearch: -1,\n\t\t\t        val: \"x_fuerza\"\n\t\t\t    });\n\n\t\t\t\t\n\t\t\t});\n\t\t});\n\n\t\t// tooltip(); lo llama elecciones_app.js\n\t\n\t});\n\n\t \n\t  \n\t\t/*compartir*/\n\t\tfunction myPopup(url) {\n\t   \t \twindow.open( url, \"Compartir\", \"status = yes, height = 360, width = 500, resizable = yes, left = \"+(ancho/2+250)+\", top =\" +(alto/2-150) );\n\t    \treturn false;\n\t\t}\n\n});\n\n\n\t/* // tooltip /*/\nfunction tooltip(){\n\n\tvar comu = $(\"polygon, path\");\n\tvar toolip = $(\".tooltip\");\n\n\tcomu.on( 'mouseenter', function() {\n\n\t\t$el = $(this);\n\n\t\tide = $el.attr(\"id\").replace(/c/i, \"\");\n\t\t\n\t\tif(app.filtro_activo == \"x_fuerza\"){\n\n\t\t\tvar data = app.r_general.comunas[\"comuna_\"+ide];\n\t\t\tvar max = app.get_max_obj(data, \"porcentaje\");\n\t\t\tdata = app.sort_obj(data, \"porcentaje\");\n\t\t\t\n          \t// llenar popup\n\t\t\tapp.draw_tooltip({\n\t\t\t\tid:ide,\n\t\t\t\tmax: max,\n\t\t\t\tcomuna: data,\n\t\t\t\tbarios_x_com: app.barios_x_com[\"c\"+ide]\n\t\t\t});\n\n\t\t\ttoolip.show();\n\t\t\tmouse_move($el, toolip);\n\t\t}else{\n\t\t\t// tooltip \n\n\t\t}\n    \t\n    \t// animate tooltip\n        \n\n    });\n\n\tfunction mouse_move($el, toolip){\n\t    $el.on('mousemove', function(e){\n\t      \n\t         e = e || window.event;\n\t         e = jQuery.event.fix(e);\n\t         \n\t        var itemX = e.pageX - 200;\n\t\t\tif(e.pageX > 185 && ancho < 750){\n\t\t\t\titemX = e.pageX - 200;\n\t\t\t}else if(e.pageX < 330){\n\t\t\t\titemX = e.pageX;\n\t\t\t}\n\n\t         if(e.pageY > 350 && ancho < 750){\n\t\t\t\titemY = e.pageY - 260;\n\t         }else if(e.pageY > 350){\n\t\t\t\titemY = e.pageY - 260;\n\t         }else{\n\t\t\t\titemY = e.pageY + 30;\n\t         }\n\n\t         $(\".tooltip\").animate({\"top\":itemY, \"left\":itemX},100, 'swing').stop( true, true );\n\n\t    });\n\n\t    if(isMobile.any()) {\n\t\t           \n\t    }else{\n\t\t\t\n\t\t\t$el.on('mouseout', function(){\n\t        \ttoolip.hide();\n\t\t\t});\t\n\t    }\n\t}\n}\n\n"],"sourceRoot":"/source/"}