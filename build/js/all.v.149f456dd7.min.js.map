{"version":3,"sources":["permanentlinkjs.js","elecciones_app.js","scripts.js"],"names":["PermanentLinkJS","reset","query","set_hash","set","key","val","k","err","console","error","message","get_parameters","str","location","hash","replace","split","map","n","this","bind","set_from_location","kill","to_string","o","s","push","join","q","get_query","ElecionesApp","dict_partidos","dict_candidatos","results","path_to_data","set_data_active","$","html","fadeIn","r_general","internas","interna","comuna_active_path","filtro_home","filtro_activo","change","change_dropdown","on","select2","tmpl_opts","Handlebars","compile","cont_results","tmpl_li_partido","tmpl_x_interna","start_app","get_mesas_escrutadas","tooltip","tmpl_tooltip","tmpl_tooltip_interna","on_click_comuna","prototype","cache_ajax","reset_cache_ajax","reload_app","get_r_general","extend","fuerza","comuna","callback","get","resumen","mp","vp","e","format","draw_x_interna","key_cache","run_interna","data","animate_barras","each","$el","delay","animate","width","duration","queue","get_ganadores_x_comuna","ganadores_comunas","com","test","i","id","c","pintar_mapa","select_comuna_interna","polygon","com_name","set_comuna_active_path","select_comuna_general","draw_ul_list","hide","remove_comuna_active_path","prop","removeClass","get_max_obj","arr","max","x","Math","apply","sort_obj","compare","a","b","sort","id_url","is_comuna","document","getElementById","c_00","l","p","show","start_niceScroll","comu","r","is_99","candidato_btn","closest","addClass","value","draw_tooltip","remove","clone","attr","css","append","selector","niceScroll","cursorcolor","cursorborder","cursorwidth","autohidemode","hidecursordelay","fill","forEach","color_partido","color_candidato","style","fill-opacity","length","stroke","barios_x_com","c01","c02","c03","c04","c05","c06","c07","c08","c09","c10","c11","c12","c13","c14","c15","colores","myPopup","url","window","open","ancho","alto","mouse_move","toolip","event","jQuery","fix","itemX","pageX","itemY","pageY","top","left","stop","isMobile","any","ide","app","slice","d","color","nombre","nombre_partido","partidos","partido_id","apellido","candidatos","height","resize","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","mapa","get_polygon_centroid","pts","p1","p2","f","twicearea","y","nPts","j","append_path","el","t","createElementNS","xmlns","setAttributeNS","txt","createTextNode","appendChild","minimumResultsForSearch","cid","points","getBBox","bbox","click","fadeOut","Number","isNaN","abs","undefined","parseInt","toFixed","nn","substr"],"mappings":"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","file":"js/all.v.149f456dd7.min.js","sourcesContent":["var PermanentLinkJS = function() {\n\t\"use strict\";\n\n\tvar query = {};\n\n\tfunction reset(){ \n\t\tquery = {};\n\t\tset_hash();\n\t\treturn query;\n\t}\n\n\tfunction set(key, val) {\n\t\tif (typeof key == 'object'){\n\t\t\ttry{\n\t\t\t\tfor (var k in key){\n\t\t\t\t\tquery[k] = key[k];\t\n\t\t\t\t}\n\t\t\t}catch(err){\n\t\t\t\tconsole.error(\"Error set query: %s\", err.message);\n\t\t\t}\n\t\t}else{\n\t\t\ttry{\n\t\t\t\tquery[key] = val;\n\t\t\t\tset_hash();\n\t\t\t}catch(err){\n\t\t\t\tconsole.error(\"Error set query: %s\", err.message);\n\t\t\t}\n\t\t}\n\t\treturn query;\n\t}\n\t\n\tfunction get_parameters(str) {\n\t\tstr = str || location.hash;\n\t\treturn str.replace(\"#\", \"\").split(\"&\").map(function(n){return n = n.split(\"=\"),this[n[0]] = n[1],this;}.bind({}))[0];\n\t}\n\n\tfunction set_from_location(){\n\t\tquery = get_parameters();\n\t\treturn (query);\n\t}\n\n\tfunction kill(k){ \n\t\tdelete query[k]; \n\t\tset_hash();\n\t\treturn query;\n\t}\n\n\tfunction to_string(o){\n\t\tvar s = [];\n\t\tfor(var k in o){\n\t\t\ts.push([k, o[k]].join(\"=\"));\n\t\t}\n\t\treturn s.join(\"&\");\n\t}\n\n\tfunction set_hash(q) {\n\t\tq = typeof q == \"string\" ? q : to_string(q || query);\n\t\ttry{\n\t\t\treturn (location.hash = q);\n\t\t}catch(err){\n\t\t\tconsole.error(\"Error set_hash: %s\", err.message);\n\t\t}\n\t}\n\n\tthis.get_query = function() { return query; };\n\t\n\tthis.reset = reset;\n\tthis.get_parameters = get_parameters;\n\tthis.to_string = to_string;\n\tthis.set_hash = set_hash;\n\tthis.set = set;\n\tthis.kill = kill;\n\tthis.set_from_location = set_from_location;\n};\n\n","// Elecciones class\nvar ElecionesApp = function(dict_partidos, dict_candidatos, results, path_to_data){\n\t\"use strict\";\n\t// set self class var\n\tvar s = this;\n\ts.dict_partidos = dict_partidos;\n\ts.dict_candidatos = dict_candidatos;\n\ts.path_to_data = path_to_data;\n\t\n\t// data dinamica\n\ts.r_general = results;\n\ts.internas = results.interna;\n\ts.comuna_active_path = null;\n\ts.filtro_home = \"00\"; // filtro seteado por default\n\ts.filtro_activo = \"00\";\n\t// s.r_internas = results.inernas;\n\t\n\tfunction set_data_active(str){\n\t\t$(\"#selected h4\").html(str).fadeIn();\n\t}\n\n\n\t(function init(){\n\t\t\n\t\t// bind events\n\n\t\t// change dropdown\n\t\t$('select#opts').change(function(e){\n\t\t\ts.change_dropdown($(this).val());\n\t\t});\n\t\t$('h3').on('click', function(){ // volver a la home \n\t\t\ts.filtro_activo = s.filtro_home;\n\t\t\ts.reset();\n\t\t\t$('select#opts').select2(\"val\", s.filtro_home);\n\t\t});\n\t\t\n\t\t// template para el select de internas\n\t\ts.tmpl_opts = Handlebars.compile($('#tmpl_opts').html());\n\t\t$(\"#opts\").html( s.tmpl_opts(s.dict_partidos) );\n\t\t\n\t\t// template para listado de resultados por partido\n\t\ts.cont_results = $(\"#results\"); // contenedor ul para los partidos (barras)  \n\t\ts.tmpl_li_partido = Handlebars.compile($('#tmpl_li_partido').html());\n\t\ts.tmpl_x_interna = Handlebars.compile($('#tmpl_x_interna').html());\n\t\t\n\t\t// get query string\n\t\t\n\t\ts.start_app();\n\t\ts.get_mesas_escrutadas();\n\n\t\t// template tooltip\n\t\ts.tooltip = $(\"#tooltip\"); // contenedor ul para los partidos (barras)  \n\t\ts.tmpl_tooltip = Handlebars.compile($('#tmpl_tooltip').html());\n\t\ts.tmpl_tooltip_interna = Handlebars.compile($('#tmpl_tooltip_interna').html());\n\n\t\ts.on_click_comuna();\n\t\t\n// ***********\n\t\ttooltip(); // esta en scripts.js\n\t\t// setInterval(function(){s.reload_app();}, 6000);\n\n\t})();\n\n\tthis.set_data_active = set_data_active;\n};\n\n\n\nElecionesApp.prototype.cache_ajax = {};\n\nElecionesApp.prototype.reset_cache_ajax = function(){\n\tthis.cache_ajax = {};\n};\n\nElecionesApp.prototype.reload_app = function(){\n\tvar s = this;\n\ts.get_r_general(function(){\n\t\ts.start_app();\n\t\ts.get_mesas_escrutadas();\n\t\t$('select#opts').select2(\"val\", \"16\");\n\t});\n\n};\n\nElecionesApp.prototype.start_app = function(){\n\tvar s = this;\n\ts.q.set_from_location();\n\t\n\tvar q = $.extend(true, {}, s.q.get_query());\n\t\n\ts.reset_cache_ajax();\n\t\n\ts.filtro_activo = q.fuerza || s.filtro_home;\n\t\n\ts.change_dropdown(s.filtro_activo, q.comuna);\n\n\tif(q.comuna){\n\t\t$(\"#selected h4\").html(\"Comuna \"+q.comuna).fadeIn();\n\t}\n\t\n};\n\nElecionesApp.prototype.get_r_general = function(callback){\n\tvar s = this; \n\t$.get(s.path_to_data+\"partido_00.json\", function(results){\n\t\ts.r_general = results;\n\t\t\n\t\tif(callback){callback();}\n\t});\n};\n\nElecionesApp.prototype.get_mesas_escrutadas = function(callback){\n\tvar s = this; \n\t$.get(s.path_to_data+\"resumen.json\", function(resumen){\n\t\ts.resumen = resumen;\n\t\t$('#mesas span').html(s.resumen.mp+'%');\n\t\t$('#votos span').html(s.resumen.vp+'%');\n\t\t$('#padron span').html((+s.resumen.e).format(0, \",\", '.'));\n\n\t\tif(callback){callback();}\n\t});\n};\n\n\nElecionesApp.prototype.draw_x_interna = function(val){ // recive el id del partido requerido\n\tvar s = this;\n\tvar key_cache = \"partido_\" + val;\n\tif(!s.cache_ajax[key_cache]){ // si no esta en cache lo va a buscar...\n\t\t\n\t\t$.get(s.path_to_data + key_cache + \".json\", function(data){\n\t\t\ts.cache_ajax[key_cache] = data;\n\t\t\ts.run_interna(key_cache);\n\t\t});\n\n\t}else{\t\n\t\t\ts.run_interna(key_cache);\n\t}\n\n};\n\n\nElecionesApp.prototype.animate_barras = function(){\n\t$(\"#results .cont_barra .barra\").each(function(i, el){\n\t\tvar $el = $(this);\n\t\t$el.delay(500).animate({width: $el.data(\"width\")}, {duration: 900, queue:false});\n\t});\n};\n\n\nElecionesApp.prototype.get_ganadores_x_comuna = function(data){\n\t// toma todos los ganadores por comuna y pinta el mapa\n\tvar s = this;\n\ts.ganadores_comunas = [];\n\tfor (var com in data){\n\t\tif(!/c\\_0{2}|r/i.test(com)){ // que no sea la comuna 00\n\t\t\tvar i = 0;\n\n\t\t\twhile(/BLC|NUL|REC|IMP/i.test(data[com][i].id)){\n\t\t\t\ti += 1;\n\t\t\t\tif(i>15){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar c = data[com][i];\n\t\t\tc.comuna = com.replace(/\\_0?/, \"\");\n\t\t\ts.ganadores_comunas.push(c);\n\t\t}\n\t}\n\ts.pintar_mapa();\n};\n\nElecionesApp.prototype.select_comuna_interna = \tfunction(polygon){\n\tvar s = this;\n\n\tvar id = polygon.id.replace(/c/i, \"\");\n\tvar com_name = \"Comuna \"+ id;\n\ts.set_data_active(com_name);\n\t\n\tvar comuna = \"c_\"+(id < 10 ? \"0\"+(+id) : id);\n\tvar key_cache = 'partido_'+ s.filtro_activo;\n\ts.run_interna(key_cache, comuna);\n\n\ts.q.set(\"comuna\", id);\n\ts.set_comuna_active_path(polygon);\n\n};\n\n\nElecionesApp.prototype.select_comuna_general = \tfunction(polygon){\n\tvar s = this;\n\n\tvar id = polygon.id.replace(/c/i, \"\");\n\tvar com_name = \"Comuna \"+ id;\n\ts.set_data_active(com_name);\n\n\ts.set_comuna_active_path(polygon);\n\n\ts.q.set(\"comuna\", id);\n\n\t// lista de partidos x comuna\n\ts.draw_ul_list(id);\n};\n\n\nElecionesApp.prototype.on_click_comuna = function (){\n\tvar s = this;\n\t// click mapa\n\t$('polygon, path').on('click', function(e){\n\t\t\n\t\tif(s.filtro_activo == s.filtro_home){ // dropdown x fuerza\n\t\t\t\n\t\t\ts.select_comuna_general(this);\n\t\t\n\t\t}else{ // dropdown x interna o listas únicas\n\t\t\ts.select_comuna_interna(this);\n\n\t\t\n\t\t}\n\n\t});\n};\n\n\nElecionesApp.prototype.reset = function (){\n\tvar s = this;\n\t// resetea el los filtros\n\t$(\"#selected h4\").hide().html(\"\");\n\t\n\ts.remove_comuna_active_path();\n\tif(this.filtro_activo == this.filtro_home){ // dropdown x fuerza\n\t\t// s.get_ganadores_x_comuna(s.r_general);\n\t\ts.draw_ul_list();\n\t\ts.q.kill(\"comuna\");\n\n\t}else{ // dropdown x interna o listas únicas\n\t\ts.draw_x_interna(this.filtro_activo);\n\n\t}\n\t// clear radio btn\n\t$('li.candidato.active input').prop('checked', false);\n\t$('li.candidato.active').removeClass('active');\n\t\n};\n\nElecionesApp.prototype.get_max_obj = function(arr, key){ \n\t\n\tvar max = arr.map(function(x){ return x[key]; });\n\treturn Math.max.apply(null, max); \n};\n\nElecionesApp.prototype.sort_obj = function(arr, key){ \n\tfunction compare(a,b) {\n\t  if (a[key] > b[key])\n\t     return -1;\n\t  if (a[key] < b[key])\n\t    return 1;\n\t  return 0;\n\t}\n\treturn arr.sort(compare);\n};\n\nElecionesApp.prototype.draw_ul_list = function(id, id_url){ // si no viene data, escribe la general\n\tthis.get_ganadores_x_comuna(this.r_general);\n\tvar is_comuna = false;\n\tvar data;\n\t\n\tif(id_url){ \n\t\tid = id_url;\n\t\tvar c = document.getElementById(\"c\"+id);\n\t\tthis.set_comuna_active_path(c);\n\t}\n\tif(!id){\n\t\tdata = this.r_general.c_00;\n\t}else{\n\t\tid = (id < 10) ? \"0\"+id: id; // make id for data\n\t\tdata = this.r_general[\"c_\"+id];\n\t\tis_comuna = true;\n\t}\n\t// this.sort_obj(data, 'p'); // ya viene ordenado\n\tvar max = data.map(function(x){ return x.p; });\n\tvar l = {\n\t\tdata : data,\n\t\tdict_candidatos: this.dict_candidatos,\n\t\tdict_partidos: this.dict_partidos,\n\t\tis_comuna: is_comuna,\n\t\tmax : this.get_max_obj(data, \"p\")\n\t};\n\n\tthis.cont_results.html(this.tmpl_li_partido(l));\n\tthis.animate_barras();\n\n\tif(is_comuna){ $(\".help_text, #line\").hide();}else{$(\".help_text, #line\").show();}\n\n// start niceScroll\n\tthis.start_niceScroll(\"#list\");\n\tif(id_url){ \n\t\tvar comu = document.getElementById(\"c\"+id);\n\t\tthis.set_comuna_active_path(comu);\n\t}\n\n};\n\n\nElecionesApp.prototype.run_interna = function(key_cache, comuna){\n\tvar s = this;\n\tif(!comuna){ comuna = 'c_00';}\n\n\tvar interna = s.cache_ajax[key_cache];\n\n\tvar data = {\n\t\tinterna: interna,\n\t\tcomuna : interna[comuna],\n\t\tr : s.cache_ajax[key_cache].r,\n\t\tis_99: s.filtro_activo == \"99\",\n\t\tmax: s.cache_ajax[key_cache][comuna][0].p,\n\t\tdict_candidatos: s.dict_candidatos\n\t};\n\n\ts.cont_results.html(s.tmpl_x_interna(data));\n\ts.get_ganadores_x_comuna(s.cache_ajax[key_cache]);\n\t\t\n\ts.animate_barras();\n\t\n\t// bind events for inputs\n\tvar candidato_btn = $('input[type=\"radio\"]');\n\tcandidato_btn.on('click', function(el){\n\t\tvar $el = $(this);\n\t\t$('li.active:has(input)').removeClass('active');\n\t\t$el.closest('li').addClass('active');\n\n\t\ts.set_data_active(this.value);\n\t\ts.q.set(\"candidato\", this.value);\n\t});\n\n\t// start niceScroll\n\ts.start_niceScroll('#list_interna');\n};\n\nElecionesApp.prototype.draw_tooltip = function(html){\n\tthis.tooltip.html(html);\n};\n\nElecionesApp.prototype.remove_comuna_active_path = function(){\n\tif(this.comuna_active_path){\n\t\tthis.comuna_active_path.remove();\n\t}\n\n};\n\nElecionesApp.prototype.set_comuna_active_path = function(polygon){\n\tthis.remove_comuna_active_path();\n\tthis.comuna_active_path = $(polygon).clone();\n\tthis.comuna_active_path.attr(\"class\",\"comuna_active_path\");\n\tthis.comuna_active_path.css(\"fill-opacity\",\"0\");\n\t$(\"svg\").append(this.comuna_active_path);\n};\n\n\nElecionesApp.prototype.change_dropdown = function(val, id_url){\n\tvar s = this;\n\ts.filtro_activo = val;\n\tif(!id_url){\n\t\ts.reset();\n\t\ts.remove_comuna_active_path();\n\t}\n\t$('#ayud1').hide();\n\t$('.compartir').show();\n\tif(s.filtro_home == s.filtro_activo){\n\t\t$(\"polygon, path\").css('fill-opacity', \"1\" );\n\t\ts.draw_ul_list(null, id_url);\n\t}else{\t\n\t\ts.draw_x_interna(val);\n\t}\n\t// set path\n\ts.q.set('fuerza', val);\n\n};\n\nElecionesApp.prototype.start_niceScroll = function(selector){\n\t$(selector).niceScroll({\n\t\tcursorcolor:\"#d7d7d7\",\n\t\tcursorborder:\"0px solid #fff\",\n\t\tcursorwidth: \"7px\",\n\t\tautohidemode:false,\n\t\thidecursordelay:0\n\t});\n};\n\n\nElecionesApp.prototype.pintar_mapa = function(){\n\t\n\tvar s = this;\n\tvar list_comunas = [\"c1\", \"c2\", \"c3\", \"c4\", \"c5\", \"c6\", \"c7\", \"c8\", \"c9\", \"c10\", \"c11\", \"c12\", \"c13\", \"c14\", \"c15\"];\n\t\n\tvar fill = \"#fff\";\n\n\t// $(\"path, polygon\").css({ // reset styles maps\n\t// \t'fill': '#fff',\n\t// \t'stroke': fill,\n\t// \t'fill-opacity': \"1\"\n\t// \t});\n\t\n\tif(this.filtro_activo == this.filtro_home){\n\t\ts.ganadores_comunas.forEach(function(x){\n\t\t\t$(\"#\"+x.comuna).css({ fill: s.dict_partidos[x.id].color_partido});\n\t\t});\n\t}else{\n\t\t\n\t\tvar interna = this.cache_ajax[\"partido_\"+this.filtro_activo].c_00;\n\n\t\ts.ganadores_comunas.forEach(function(x){\n\n\t\t\tfill = s.dict_candidatos[x.id] ? s.dict_candidatos[x.id].color_candidato : \"#ccc\";\n\t\t\tvar style = { fill: fill, 'fill-opacity': \"1\"};\n\t\t\tif (x.id != interna[0].id){\n\t\t\t\tstyle[\"fill-opacity\"] = \".4\";\n\t\t\t\tif (x.id != interna[1].id){\n\t\t\t\t\tstyle = { \"fill\": \"#ccc\"};\n\t\t\t\t}\n\t\t\t}\n\t\t\t$(\"#\"+x.comuna).css(style);\n\t\t});\n\t\tif(s.ganadores_comunas.length < 15){ \n\t\t\t$(\"path, polygon\").css({ stroke: '#ccc'});\n\t\t}\n\n\t}\n};\n\n\nElecionesApp.prototype.barios_x_com = {\n\t  \"c01\": \"Constitución, Monserrat, Puerto Madero, Retiro, San Nicolás, San Telmo\",\n\t  \"c02\": \"Recoleta\",\n\t  \"c03\": \"Balvanera, San Cristobal\",\n\t  \"c04\": \"Barracas, La Boca, Nueva Pompeya, Parque Patricios\",\n\t  \"c05\": \"Almagro, Boedo\",\n\t  \"c06\": \"Caballito\",\n\t  \"c07\": \"Flores, Parque Chacabuco\",\n\t  \"c08\": \"Villa Lugano, Villa Riachuelo, Villa Soldati\",\n\t  \"c09\": \"Liniers, Mataderos, Parque Avellaneda\",\n\t  \"c10\": \"Floresta, Monte Castro, Vélez Sarsfield, Versalles, Villa Luro, Villa Real\",\n\t  \"c11\": \"Villa Del Parque, Villa  Devoto, Villa Gral. Mitre, Villa Santa Rita\",\n\t  \"c12\": \"Coghlan, Saavedra, Villa Pueyrredón, Villa Urquiza\",\n\t  \"c13\": \"Belgrano, Colegiales, Núñez\",\n\t  \"c14\": \"Palermo\",\n\t  \"c15\": \"Agronomía, Chacarita,  Parque Chas,  Paternal, Villa Crespo, Villa Ortúzar\"\n\t};\n\nElecionesApp.prototype.q = new PermanentLinkJS();\n\nElecionesApp.prototype.colores = [\"#FEDB30\",\"#1796D7\",\"#7CC374\",\"#F4987E\",\"#B185B7\",\"#B3B3B3\"];\n\n\n","// scripts app\nvar app;\n\nvar ancho = $(window).width();\nvar alto = $(window).height();\n\n$( window ).resize(function() {\n  \tancho = $(window).width();\n    alto = $(window).height();\n});\n\nvar isMobile = { //valida si es un dispositivo movil\n    Android: function() {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function() {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function() {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function() {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function() {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function() {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\n$(function(){\n    \n\t\"use strict\";\n\t// load mapa\n\tvar path_to_data = \"http://datapaso.lanacion.com.ar/json_data/\"; \n\t// var path_to_data = \"http://datapaso.lanacion.com.ar/sim_output/\"; // url de test\n\t$.get(\"img/caba_ilus.txt\", function(mapa){\n\t\t// get list partidos\n\t\t$.get(\"dicts/diccionario_partidos.json\", function(dict_partidos){\n\t\t\t$.get(\"dicts/diccionario_candidatos.json\", function(dict_candidatos){\n\t\t\t\t\n\t\t\t\t$.get(path_to_data+\"partido_00.json\", function(results){\n\n\t\t\t\t\t$(\"#mapa_cont\").html(mapa + '<div class=\"ayuda2\">FILTRAR POR CANDIDATO</div><div class=\"ayuda3\">Clickeá en las comunas para ver los resultados en detalle.</div></div>');\n\t\t\t\t\t\n\t\t\t\t\t// init app\n\t\t\t\t\tapp = new ElecionesApp(dict_partidos, dict_candidatos, results, path_to_data);\n\n\t\t\t\t\t$(\"#opts\").select2({\n\t\t\t\t        minimumResultsForSearch: -1,\n\t\t\t\t        val: \"x_fuerza\"\n\t\t\t\t    });\n\n\n\t\t\t\t\t// append nombres comunas\n\t\t\t\t\tvar xmlns = \"http://www.w3.org/2000/svg\";\n\t\t\t\t\tfunction get_polygon_centroid(pts) {\n\t\t\t\t\t   var twicearea=0,\n\t\t\t\t\t   x=0, y=0,\n\t\t\t\t\t   nPts = pts.length,\n\t\t\t\t\t   p1, p2, f;\n\t\t\t\t\t   for ( var i=0, j=nPts-1 ; i<nPts ; j=i++ ) {\n\t\t\t\t\t      p1 = pts[i]; p2 = pts[j];\n\t\t\t\t\t      f = p1.x*p2.y - p2.x*p1.y;\n\t\t\t\t\t      twicearea += f;          \n\t\t\t\t\t      x += ( p1.x + p2.x ) * f;\n\t\t\t\t\t      y += ( p1.y + p2.y ) * f;\n\t\t\t\t\t   }\n\t\t\t\t\t   f = twicearea * 3;\n\t\t\t\t\t   return { x:x/f, y:y/f };\n\t\t\t\t\t}\n\t\t\t\t\tfunction append_path(x, y, el){\n\t\t\t\t\t\tvar t = document.createElementNS(xmlns, \"text\");\n\t\t\t\t\t\tt.setAttributeNS(null,\"x\", x);\t\t\n\t\t\t\t\t\tt.setAttributeNS(null,\"y\",y);\t\t\n\t\t\t\t\t\tt.setAttributeNS(null,\"font-size\",15);\n\t\t\t\t\t\tt.setAttributeNS(null,\"fill\",'#fff');\n\t\t\t\t\t\tvar txt = document.createTextNode(el.id.replace(\"c\", \"\"));\n\t\t\t\t\t\tt.appendChild(txt);\n\t\t\t\t\t\t$(\"#mapa_cont svg\").append(t);\n\t\t\t\t\t}\t\n\n\t\t\t\t\t$('polygon').each(function(i, el){\n\t\t\t\t\t\tvar cid = get_polygon_centroid(el.points);\n\t\t\t\t\t\tvar bbox = el.getBBox();\n\t\t\t\t\t\tappend_path(cid.x, cid.y, el);\n\t\t\t\t\t\t\n\t\t\t\t\t});\n\n\t\t\t\t\t$('path').each(function(i, el){\n\t\t\t\t\t\tvar bbox = el.getBBox();\n\t\t\t\t\t\tappend_path((bbox.x +bbox.width/2-10), (bbox.y+bbox.height/2+10), el);\n\t\t\t\t\t\t\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".creditos\").click(function(){\n\t\t\t\t\t\t$(\".creVent\").fadeIn(200);\n\t\t\t\t\t\t$(\".creVent .txts\").delay(300).fadeIn(200);\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\".cerrar\").click(function(){\n\t\t\t\t\t\t$(\".creVent .txts\").fadeOut(200);\n\t\t\t\t\t\t$(\".creVent\").delay(300).fadeOut(200);\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\t// tooltip(); lo llama elecciones_app.js\n\t\n\t});\n\n\t \n\t  \n\t\t\n\n});\n\n\n\n/*compartir*/\nfunction myPopup(url) {\n\twindow.open( url, \"Compartir\", \"status = yes, height = 360, width = 500, resizable = yes, left = \"+(ancho/2+250)+\", top =\" +(alto/2-150) );\n\treturn false;\n}\n\n\t/* // tooltip /*/\nfunction tooltip(){\n\n\tvar comu = $(\"polygon, path\");\n\tvar toolip = $(\".tooltip\");\n\tvar html = \"\";\n\tvar data;\n\tcomu.on( 'mouseenter', function() {\n\n\t\t$el = $(this);\n\n\t\tide = $el.attr(\"id\").replace(/c/i, \"\");\n\t\t\n\t\tide = ide < 10 ? \"0\"+ide : ide;\n\t\t\n\t\tif(app.filtro_activo == app.filtro_home){\n\t\t\tdata = app.r_general[\"c_\"+ide];\n\t\t\tvar max = data[0].p;\n\t\t\tdata = data.slice(0, 3).map(function(d){\n\t\t\t\td.color = app.dict_partidos[d.id].color_partido;\n\t\t\t\td.nombre = app.dict_partidos[d.id].nombre_partido;\n\t\t\t\treturn d;\n\t\t\t});\n\t\t\t\n          \t// llenar popup\n\n          \thtml = app.tmpl_tooltip({\n\t\t\t\tid:ide,\n\t\t\t\tmax: max,\n\t\t\t\tpartidos: data,\n\t\t\t\tbarios_x_com: app.barios_x_com[\"c\"+ide]\n\t\t\t});\n\t\t}else{\n\t\t\t\n\t\t\t// tooltip por interna\n\t\t\tvar partido_id = app.filtro_activo;\n\t\t\tdata = app.cache_ajax['partido_'+partido_id]['c_'+ide].slice(0, 3);\n\t\t\t\tdata = data.map(function(d){\n\t\t\t\t\td.color = app.dict_candidatos[d.id] ? app.dict_candidatos[d.id].color_candidato : \"#ccc\";\n\t\t\t\t\td.apellido = app.dict_candidatos[d.id] ? app.dict_candidatos[d.id].apellido : \"#ccc\";\n\t\t\t\t\t// d.nombre = app.dict_partidos[d.id].nombre_partido;\n\t\t\t\t\treturn d;\n\t\t\t\t});\n\t\t\t\n\t\t\thtml = app.tmpl_tooltip_interna({\n\t\t\t\t\t\tid: ide,\n\t\t\t\t\t\tmax: data[0].p,\n\t\t\t\t\t\tcandidatos: data,\n\t\t\t\t\t\tinterna: app.cache_ajax['partido_'+partido_id],\n\t\t\t\t\t\tbarios_x_com: app.barios_x_com[\"c\"+ide]\n\t\t\t\t\t});\n\t\t}\n    \t\n\t\tapp.draw_tooltip(html);\n\n\t\ttoolip.show();\n\n\t\tmouse_move($el, toolip);\n    \t// animate tooltip\n        \n    });\n\n\tfunction mouse_move($el, toolip){\n\t    $el.on('mousemove', function(e){\n\t      \n\t         e = e || window.event;\n\t         e = jQuery.event.fix(e);\n\t         \n\t        var itemX = e.pageX - 200;\n\t\t\tif(e.pageX > 185 && ancho < 750){\n\t\t\t\titemX = e.pageX - 200;\n\t\t\t}else if(e.pageX < 330){\n\t\t\t\titemX = e.pageX;\n\t\t\t}\n\n\t         if(e.pageY > 350 && ancho < 750){\n\t\t\t\titemY = e.pageY - 260;\n\t         }else if(e.pageY > 350){\n\t\t\t\titemY = e.pageY - 260;\n\t         }else{\n\t\t\t\titemY = e.pageY + 30;\n\t         }\n\n\t         $(\".tooltip\").animate({\"top\":itemY, \"left\":itemX},100, 'swing').stop( true, true );\n\n\t    });\n\n\t    if(isMobile.any()) {\n\t\t           \n\t    }else{\n\t\t\t\n\t\t\t$el.on('mouseout', function(){\n\t        \ttoolip.hide();\n\t\t\t});\t\n\t    }\n\t}\n}\n\nNumber.prototype.format = function(c, d, t){\n        var n = this;\n        c = isNaN(c = Math.abs(c)) ? 2 : c;\n        d = d === undefined ? \".\" : d;\n        t = t === undefined ? \",\" : t;\n        var s = n < 0 ? \"-\" : \"\",\n        i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + \"\",\n        j = (j = i.length) > 3 ? j % 3 : 0;\n        var nn = s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n        return nn;\n    };"],"sourceRoot":"/source/"}